<?php
namespace Database\Seeders;

use Carbon\Carbon;
use Illuminate\Database\Seeder;
use App\Models\Administrative\Union;
use App\Models\Administrative\Upazila;

class UnionSeeder extends Seeder
{
    public function run()
    {
        $data = [

            // ১. পটুয়াখালী সদর
            'পটুয়াখালী সদর' => [
                'পটুয়াখালী পৌরসভা',
                'আউলিয়াপুর ইউনিয়ন',
                'ইটবাড়ীয়া ইউনিয়ন',
                'কমলাপুর ইউনিয়ন',
                'কালিকাপুর ইউনিয়ন',
                'ছোট বিঘাই ইউনিয়ন',
                'জৈনকাঠী ইউনিয়ন',
                'বড় বিঘাই ইউনিয়ন',
                'বদরপুর ইউনিয়ন',
                'ভুরিয়া ইউনিয়ন',
                'মরিচবুনিয়া ইউনিয়ন',
                'মাদারবুনিয়া ইউনিয়ন',
                'লাউকাঠি ইউনিয়ন',
                'লোহালিয়া ইউনিয়ন',
            ],

            // ২. বাউফল
            'বাউফল'         => [
                'বাউফল পৌরসভা',
                'আদাবাড়িয়া ইউনিয়ন',
                'কনকদিয়া ইউনিয়ন',
                'কাছিপাড়া ইউনিয়ন',
                'কালাইয়া ইউনিয়ন',
                'কালিশুরী ইউনিয়ন',
                'কেশবপুর ইউনিয়ন',
                'চন্দ্রদ্বীপ ইউনিয়ন',
                'দাসপাড়া ইউনিয়ন',
                'ধূলিয়া ইউনিয়ন',
                'নওমালা ইউনিয়ন',
                'নাজিরপুর ইউনিয়ন',
                'বগা ইউনিয়ন',
                'বাউফল ইউনিয়ন',
                'মদনপুরা ইউনিয়ন',
                'সূর্যমনি ইউনিয়ন',
            ],

            // ৩. গলাচিপা
            'গলাচিপা'       => [
                'গলাচিপা পৌরসভা',
                'গলাচিপা ইউনিয়ন',
                'আমখোলা ইউনিয়ন',
                'কলাগাছিয়া ইউনিয়ন',
                'গজালিয়া ইউনিয়ন',
                'গোলখালী ইউনিয়ন',
                'চর বিশ্বাস ইউনিয়ন',
                'চর কাজল ইউনিয়ন',
                'পানপট্টি ইউনিয়ন',
                'চিকনিকান্দি ইউনিয়ন',
                'ডাকুয়া ইউনিয়ন',
                'বকুলবাড়িয়া ইউনিয়ন',
                'রতনদী তালতলী ইউনিয়ন',
            ],

            // ৪. দশমিনা
            'দশমিনা'        => [
                'দশমিনা ইউনিয়ন',
                'আলীপুরা ইউনিয়ন',
                'চর বোরহান ইউনিয়ন',
                'বহরমপুর ইউনিয়ন',
                'বাঁশবাড়িয়া ইউনিয়ন',
                'বেতাগী সানকিপুর ইউনিয়ন',
                'রণগোপালদী ইউনিয়ন',
            ],

            // ৫. কলাপাড়া
            'কলাপাড়া'       => [
                'কলাপাড়া পৌরসভা',
                'কুয়াকাটা পৌরসভা',
                'খাপড়াভাঙ্গা ইউনিয়ন',
                'চম্পাপুর ইউনিয়ন',
                'চাকামইয়া ইউনিয়ন',
                'টিয়াখালী ইউনিয়ন',
                'ডালবুগঞ্জ ইউনিয়ন',
                'ধানখালী ইউনিয়ন',
                'ধূলাসার ইউনিয়ন',
                'নীলগঞ্জ ইউনিয়ন',
                'বালিয়াতলী ইউনিয়ন',
                'মিঠাগঞ্জ ইউনিয়ন',
                'লতাচাপলী ইউনিয়ন',
                'লালুয়া ইউনিয়ন',
            ],

            // ৬. মির্জাগঞ্জ
            'মির্জাগঞ্জ'    => [
                'আমড়াগাছিয়া ইউনিয়ন',
                'কাকড়াবুনিয়া ইউনিয়ন',
                'দেউলী সুবিদখালী ইউনিয়ন',
                'মজিদবাড়ীয়া ইউনিয়ন',
                'মাধবখালী ইউনিয়ন',
                'মির্জাগঞ্জ ইউনিয়ন',
            ],

            // ৭. দুমকি
            'দুমকি'         => [
                'আংগারিয়া ইউনিয়ন',
                'পাংগাশিয়া ইউনিয়ন',
                'মুরাদিয়া ইউনিয়ন',
                'লেবুখালী ইউনিয়ন',
                'শ্রীরামপুর ইউনিয়ন',
            ],

            // ৮. রাঙ্গাবালী
            'রাঙ্গাবালী'    => [
                'চর মোন্তাজ ইউনিয়ন',
                'চালিতাবুনিয়া ইউনিয়ন',
                'ছোট বাইশদিয়া ইউনিয়ন',
                'বড় বাইশদিয়া ইউনিয়ন',
                'রাঙ্গাবালী ইউনিয়ন',
            ],
        ];

        foreach ($data as $upazilaName => $unions) {

            $upazila = Upazila::where('name', $upazilaName)->first();

            if (! $upazila) {
                $this->command->warn("Upazila not found: {$upazilaName}");
                continue;
            }

            foreach ($unions as $unionName) {
                Union::updateOrCreate(
                    [
                        'name'       => $unionName,
                        'upazila_id' => $upazila->id,
                    ],
                    []
                );
            }
        }

        $this->command->info('All Patuakhali unions seeded successfully (verified & sorted).');
    }
}
